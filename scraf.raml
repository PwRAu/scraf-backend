#%RAML 1.0
---
title: Scraf
baseUri: https://scraf.pwrau.ml/api/{version}
version: v1

/students:
  type: 
    collection:
      example-get-collection: |
        {
          "students": [
            {
              "id": 107,
              "name": "Andrea Pappacoda"
            },
            {
              "id": 238,
              "name": "Paolo Andreoli"
            }
          ]
        }
  /{studentId}:
    type: collection-item
    /subjects:
      type: sub-collection-read
      /{subjectId}:
        /marks:
          type: sub-collection-read

/teachers:
  type: collection
  /{teacherId}:
    type: collection-item
    /subjects:
      type: sub-collection
      /{subjectId}:
        type: sub-collection-item
        /marks:
          type: sub-collection-read

/schools:
  type: collection
  /{schoolId}:
    type: collection-item
    /subjects:
      type: collection
      /{subjectId}:
        type: collection-item
        /marks:
          type: collection
          /{markId}:
            type: collection-item
    /classes:
      type: collection
      /{classId}:
        type: collection-item
        /subjects:
          type: sub-collection
          /{subjectId}:
            type: sub-collection-read
        /students:
          /{studentId}:
        /teachers:
          /{teacherId}:
  /students:
    type: sub-collection
    /{studentId}:
      type: sub-collection-item
  /teachers:
    type: sub-collection
    /{teacherId}:
      type: sub-collection-item

resourceTypes:
  collection:
    description: <<resourcePathName>> registered to Scraf
    get:
      description: Get a list of <<resourcePathName>> based on their name
      queryParameters:
        name:
          description: "Name of the <<resourcePathName|!singularize>> to search"
          type: string
          minLength: 3
          required: true
      responses:
        200:
          body:
            application/json:
              type: search-result
              example: <<example-get-collection>>
        400:
          body:
            application/json:
    post:
      description: Register a <<resourcePathName|!singularize>> and get its id
      body:
        application/json:
          type: <<resourcePathName|!singularize>>
      responses:
        201:
          body:
            application/json:
              type: id
              example: |
                {
                  "id": 107
                }
        400:
          body:
            application/json:
  collection-item:
    get:
    patch:
    delete:
  sub-collection:
    get:
    post:
  sub-collection-item:
    delete:
  sub-collection-read:
    get:

types:
  id: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        }
      }
    }
  search-result: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "id": {
          "type": "integer"
        },
        "name": {
          "type": "string"
        }
      }
    }
  message: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        }
      }
    }
  student: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "mail": {
          "type": "string",
          "format": "email"
        },
        "name": {
          "type": "string"
        },
        "surname": {
          "type": "string",
          "required": false
        }
      }
    }
  teacher: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "mail": {
          "type": "string",
          "format": "email"
        },
        "name": {
          "type": "string"
        },
        "surname": {
          "type": "string"
        }
      }
    }
  school: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      }
    }
  class: |
    {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "name": {
          "type": "string"
        }
      }
    }
